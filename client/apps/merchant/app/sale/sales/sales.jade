template(name="sales")
  +salePrinter(orderDetails=currentOrderDetails order=currentOrder)
  #header
    .editor-row
      //.editor-wrapper(style="width: 250px")
      //  span.ilabel sản phẩm
      //  +iSelect(options=productSelectOptions class="field")
      .editor-wrapper(style="width: 100px")
        span.ilabel.center số lượng
        +iSpinEdit(options=productQualityOptions)
      .editor-wrapper(style="width: 150px")
        span.ilabel.center giá bán
        +iSpinEdit(options=productPriceOptions)
      .editor-wrapper(style="width:70px")
        button.lemon.btn.lime.icon-plus-circled.addOrderDetail(class="{{allowCreateOrderDetail}}" type='submit') THÊM

      .editor-wrapper.right(style="width: 150px")
        span.ilabel.optional giá tổng
        input.quality(value="{{formatNumber finalPriceProduct}}" disabled)
      .editor-wrapper.right(style="width: 150px")
        span.ilabel.center.optional giảm giá
        +iSpinEdit(options=productDiscountCashOptions)
      .editor-wrapper.right(style="width:100px")
        span.ilabel.center.optional giảm %
        +iSpinEdit(options=productDiscountPercentOptions)

  #content.modern.sales-app
    .dual-content
      .dual-detail-wrapper
        .dual-detail
          .nano: .nano-content
            .section.top.panel.panel-default
              .panel-heading
                span heading
              .panel-body
                //+gridComponent(options=saleDetailOptions wrapperClass="detail-grid row" animation="bounceInDown")
                table.lemon-grid
                  tr
                    th(style="width:auto") SẢN PHẨM
                    th(style="width:90px") QUI CÁCH
                    th.number(style="width:50px") SL
                    th.number(style="width:100px") ĐƠN GIÁ
                    th.number(style="width:80px") GIẢM GIÁ
                    th.number(style="width:120px") THÀNH TIỀN


                  each currentOrderDetails
                    tr
                      td {{product.name}}
                      td {{product.skulls}}
                      td.number {{formatNumber quality}}
                      td.number {{formatNumber price}}
                      td.number {{formatNumber discountCash}}
                      td.number
                        span {{formatNumber finalPrice}}
                        if discountPercent
                          span.s7 {{discountPercent}}%
              .panel-footer
                .right-float
                  span.s5 TỔNG TIỀN:
                  span.s3 <b>{{formatNumber currentOrder.finalPrice}}</b> VNĐ



      .dual-addon
        .search-filter.icon-search-8
          input(name='searchFilter' type="text")
        .nano: .nano-content
          if showProductFilterSearch
            .group-wrapper
              each allProductInCurrentWarehouse
                .caption.inner.product-selection(class="{{productSelectionActiveClass}}")
                  +avatarImageComponent(avatar=avatarUrl alias=name)
                  span.text
                    | {{name}}
                    if skulls
                      | ({{skulls}})
          else
            each allProductInCurrentWarehouse
              .group-wrapper
                .caption.group {{key}}
                each childs
                  .caption.inner.product-selection(class="{{productSelectionActiveClass}}")
                    +avatarImageComponent(avatar=avatarUrl alias=name)
                    span.text
                      | {{name}}
                      if skulls
                        | ({{skulls}})
  #footer.modern
    .editor-row.extra(name='delivery')
      .editor-wrapper.right(style="width:200px")
        span.ilabel ghi chú
        input.comment(value="#{deliveryDetail.comment}")
      .editor-wrapper.right(style="width:100px")
        span.ilabel ngày giao hàng
        input(name="deliveryDate" binding="datePicker" todayHighlight="true" maxlength="20")
      .editor-wrapper.right(style="width:350px")
        span.ilabel địa chỉ giao hàng
        input.deliveryAddress(value="#{deliveryDetail.deliveryAddress}")
      .editor-wrapper.right(style="width:130px")
        span.ilabel số điện thoại
        input.contactPhone(value="#{deliveryDetail.contactPhone}")
      .editor-wrapper.right(style="width:170px")
        span.ilabel tên người nhận
        input.contactName(value="#{deliveryDetail.contactName}")

    .editor-row.extra(name='advanced')
      .editor-wrapper(style="width: 200px; margin-right: 5px;")
        span.ilabel.optional nhân viên
        +iSelect(options=sellerSelectOptions class="field")
      .editor-wrapper(style="width: 120px")
        span.ilabel.optional thanh toán
        +iSelect(options=paymentMethodSelectOption class="field")

      .editor-wrapper.right(style="width: 195px")
        span.ilabel.optional phương thức giảm giá
        +iSelect(options=billDiscountSelectOption class="field")
      .editor-wrapper.right(style="width: 190px")
        span.ilabel.center.optional giảm giá
        +iSpinEdit(options=billCashDiscountOptions)
      .editor-wrapper.right(style="width:110px")
        span.ilabel.center.optional giảm %
        +iSpinEdit(options=billPercentDiscountOptions)

    .editor-row
      .editor-wrapper
        input(binding="switch" type="checkbox" name="advancedMode")
      .editor-wrapper(style="width: 180px")
        span.ilabel.optional khách hàng
        +iSelect(options=customerSelectOptions class="field")
      .editor-wrapper(style="width: 120px")
        span.ilabel.optional giao hàng
        +iSelect(options=paymentsDeliverySelectOption class="field")
      .editor-wrapper.pull-right
        button.lemon.btn.lime.pull-right.finish(class="{{allowSuccessOrder}}" type='submit' style="margin-right: 5px;") HOÀN TẤT
      .editor-wrapper.pull-right
        button.lemon.btn.blue.pull-right.print-preview(type='submit'): span.icon-print-6
      //.editor-wrapper.pull-right(style="width: 120px")
      //  span.ilabel.optional.right thực thu
      //  input.quality(value="{{formatNumber currentOrder.finalPrice}}" disabled)
      .editor-wrapper.pull-right(style="width: 120px")
        span.ilabel.right số dư
        input.debit(value="{{formatNumber currentDebit}}" disabled)
      .editor-wrapper.pull-right(style="width: 190px")
        span.ilabel.center tiền nhận vào
        +iSpinEdit(options=depositOptions)
      //.col.col-auto.pull-right(style="width: 120px")
      //  span.ilabel.center.optional tạm tính
      //  input.quality(value="{{currentOrder.totalPrice}}")

    +tabComponent(options=tabOptions)